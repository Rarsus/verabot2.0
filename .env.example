# ============================================
# VeraBot2.0 Configuration Template
# ============================================
# Copy this file to .env and fill in your values
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults

# ============================================
# CORE CONFIGURATION (Required to start bot)
# ============================================

# [REQUIRED] Discord bot token from https://discord.com/developers/applications
# Navigate to: Bot → Reset Token → Copy
DISCORD_TOKEN=your_discord_bot_token_here

# [REQUIRED] Discord application client ID
# Navigate to: General Information → Application ID
CLIENT_ID=your_application_client_id_here

# [OPTIONAL] Guild ID for faster command registration during development
# Right-click your server → Copy Server ID (requires Developer Mode)
# Leave empty for global registration (takes up to 1 hour, works everywhere)
GUILD_ID=

# [OPTIONAL] Prefix for legacy text commands (default: !)
PREFIX=!

# ============================================
# OPTIONAL FEATURES
# ============================================

# --- AI Features ---
# [OPTIONAL] HuggingFace API key for AI poem generation
# Free tier available at: https://huggingface.co/settings/tokens
# Feature: /poem command
HUGGINGFACE_API_KEY=

# --- Webhook Proxy ---
# [OPTIONAL] Port for incoming webhook listener (default: 3000)
# Used for bi-directional message proxy feature
# Feature: Forward Discord messages to external systems
PROXY_PORT=3000

# [OPTIONAL] Encryption key for secure credential storage (64 hex characters)
# Auto-generated if not set, but recommended for production
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=

# [OPTIONAL] Secret key for HMAC signature verification (64 hex characters)
# Required for incoming webhook authentication
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SECRET_KEY=

# --- Reminders ---
# [OPTIONAL] Reminder check interval in milliseconds (default: 60000 = 1 minute)
REMINDER_CHECK_INTERVAL=60000

# [OPTIONAL] Default channel ID for reminder notifications
# Right-click channel → Copy Channel ID (requires Developer Mode)
REMINDER_NOTIFICATION_CHANNEL=

# ============================================
# PERFORMANCE CONFIGURATION
# ============================================
# These settings affect bot performance and resource usage
# Defaults are optimized for typical Discord bot workloads

# --- Cache Settings ---
# Maximum number of items to cache in memory
CACHE_MAX_SIZE=100

# Cache time-to-live in milliseconds (300000 = 5 minutes)
CACHE_DEFAULT_TTL=300000

# --- Database Connection Pool ---
# Number of concurrent database connections
DB_POOL_SIZE=5

# Timeout for database operations in milliseconds
DB_QUEUE_TIMEOUT=5000
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=60000

# --- Performance Monitoring ---
# Enable performance metrics collection (true/false)
ENABLE_PERFORMANCE_MONITORING=true

# Interval for logging performance metrics in milliseconds (300000 = 5 minutes)
PERFORMANCE_LOG_INTERVAL=300000

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Production deployments should review and enable these settings

# --- Rate Limiting ---
# Maximum requests per time window (prevents abuse)
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit time window in milliseconds (60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per user per command
RATE_LIMIT_PER_USER=10

# Command cooldown in seconds (prevents spam)
COMMAND_COOLDOWN_SECONDS=3

# --- Input Validation ---
# Maximum lengths to prevent injection attacks and abuse
MAX_INPUT_LENGTH=2000
MAX_QUOTE_LENGTH=1000
MAX_AUTHOR_LENGTH=100
MIN_QUOTE_LENGTH=10

# --- Security Features ---
# [PRODUCTION RECOMMENDED] Enable strict security mode
# Enforces additional security checks and validations
STRICT_SECURITY_MODE=true

# [PRODUCTION RECOMMENDED] Enable SQL injection detection
# Scans inputs for SQL injection patterns
ENABLE_SQL_INJECTION_DETECTION=true

# [PRODUCTION RECOMMENDED] Enable XSS detection
# Scans inputs for cross-site scripting patterns
ENABLE_XSS_DETECTION=true

# --- Audit & Logging ---
# [OPTIONAL] Enable security event audit logging
ENABLE_SECURITY_AUDIT=false

# Security log level: LOW, MEDIUM, HIGH, CRITICAL
SECURITY_LOG_LEVEL=MEDIUM

# Path for security audit log file
SECURITY_LOG_PATH=./logs/security.log

# --- Discord Security ---
# [OPTIONAL] Comma-separated Discord role IDs for admin commands
# Users with these roles can execute admin commands
# Example: ADMIN_ROLE_IDS=123456789012345678,987654321098765432
ADMIN_ROLE_IDS=

# [OPTIONAL] Comma-separated Discord user IDs for privileged operations
# These users can execute privileged commands regardless of role
# Example: PRIVILEGED_USER_IDS=123456789012345678,987654321098765432
PRIVILEGED_USER_IDS=

# Maximum attachment size in bytes (default: 8MB)
MAX_ATTACHMENT_SIZE=8388608

# --- Database Security ---
# [PRODUCTION REQUIRED] Use prepared statements (DO NOT DISABLE)
# Prevents SQL injection attacks
USE_PREPARED_STATEMENTS=true

# Database backup interval in hours (24 = daily)
DB_BACKUP_INTERVAL_HOURS=24

# Maximum database query timeout in milliseconds
DB_QUERY_TIMEOUT_MS=5000

# --- API Security ---
# [OPTIONAL] Enable API request signing for external calls
ENABLE_API_SIGNING=false

# API request timeout in milliseconds
API_TIMEOUT_MS=10000

# Maximum retry attempts for failed API requests
MAX_API_RETRIES=3

# ============================================
# DEVELOPMENT MODE (DO NOT USE IN PRODUCTION)
# ============================================

# [DEVELOPMENT ONLY] Enable development mode with relaxed security
# WARNING: Disables security checks, use only in isolated dev environment
DEV_MODE=false

# [DEVELOPMENT ONLY] Allow insecure operations for testing
# WARNING: Extremely dangerous, never enable in production
ALLOW_INSECURE_DEV=false

# ============================================
# QUICK START CONFIGURATIONS
# ============================================
# Copy the appropriate configuration below:

# --- MINIMAL (Just trying it out) ---
# DISCORD_TOKEN=your_token
# CLIENT_ID=your_client_id

# --- STANDARD (Recommended for most users) ---
# DISCORD_TOKEN=your_token
# CLIENT_ID=your_client_id
# GUILD_ID=your_guild_id
# HUGGINGFACE_API_KEY=your_key
# ENCRYPTION_KEY=<generated_64_char_hex>

# --- PRODUCTION (Full security hardening) ---
# DISCORD_TOKEN=your_token
# CLIENT_ID=your_client_id
# ENCRYPTION_KEY=<generated_64_char_hex>
# SECRET_KEY=<generated_64_char_hex>
# STRICT_SECURITY_MODE=true
# ENABLE_SQL_INJECTION_DETECTION=true
# ENABLE_XSS_DETECTION=true
# ENABLE_SECURITY_AUDIT=true
# ADMIN_ROLE_IDS=your_admin_role_ids
# DB_BACKUP_INTERVAL_HOURS=24

# ============================================
# RESOURCES & DOCUMENTATION
# ============================================
# Configuration Guide: docs/CONFIGURATION-ANALYSIS.md
# Security Guide: docs/SECURITY.md
# Setup Guide: README.md
# Generate Secrets: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
